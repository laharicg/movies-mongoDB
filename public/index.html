<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="Viewport" content="width=device-width , initial-scale=1.0">
    <link rel="stylesheet" 
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" 
    integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" 
    crossorigin="anonymous">
<title>Movie_Details</title>

</head>

<body>
    <div class="container">
       <div class ="card mt-4">
           <h1>Insert Movie Details</h1>
    <form id="form">
        <label>Movie_name</label>
        <input id="name" type="text">
        <br>
        <label>Rating</label>
        <input id="rating" type="number">
        <br>
        <label>Language</label>
        <input id="language" type="text">
        <br>
        <label>Cast</label>
        <input id="cast" type="text">
        <br>

        <input type="submit" , value="Submit">
    </form>

</div>
 <div class ="card mt-4">
     <h1>Search by ID</h1>
      <form id ="form2">
          <label>ID</label>
        <input id ="id" type ="text">
        <br>
        <input type="submit" , value="Submit">    
  
        
        
    </form>
    <div class="card mt-4" id="card1"></div>

    </div> 
    <div class ="card mt-4">
        <h1>Get All Movies</h1>
       <form id ="form3">
        <label>* Enter "All" to get all movies </label>
        <input id ="id1" type ="text">
        <br>
        <input type="submit" , value="Submit"> 

    </form >
    <div class="card mt-4" id="card2"></div> 
    </div>
    <div class ="card mt-4">
        <h1>Search By Movie Name</h1>
        <form id ="form4">
         <label>* Search with movie name </label>
         <input id ="id2" type ="text">
         <br>
         <input type="submit" , value="Search"> 
 
     </form>
     <div class="card mt-4" id="card2"></div> 
     </div>
     
    </div>
    
    <script>
        document.getElementById("form").addEventListener("submit", async function (e) {
            e.preventDefault();
            try {
                 let data = await fetch("http://localhost:3000/movie", {
                method: "POST",
                headers :{
                    "Content-type" : "application/json"
                },

                body: JSON.stringify({
                    Movie_name: document.getElementById("name").value,
                    Rating: document.getElementById("rating").value,
                    Language: document.getElementById("language").value,
                    Cast:document.getElementById("Cast").value


                })
                
                
            });
            let final = await data.json();
            console.log(final)
            } catch (error) {
                console.log(error)
            }
           
        })
    </script>
    <script>
        document.getElementById("form2").addEventListener("submit", async function (e) {
            e.preventDefault();
            try {
                let url = document.getElementById('id').value
                 let data = await fetch("http://localhost:4040/film/"+url, {
                method: "GET",
                headers :{
                    "Content-type" : "application/json"
                },

                
                
            });
            let final = await data.json();
            document.getElementById("card1").innerText = JSON.stringify(final);
            
            } catch (error) {
                console.log(error)
            }
           
        })
    </script>

<script>
    document.getElementById("form3").addEventListener("submit", async function (e) {
        e.preventDefault();
        try {
            let url = document.getElementById('id1').value
             let data = await fetch("http://localhost:3000/"+url, {
            method: "GET",
            headers :{
                "Content-type" : "application/json"
            },

            
            
        });
        let final = await data.json();
        document.getElementById("card2").innerText = JSON.stringify(final);
        
        } catch (error) {
            console.log(error)
        }
       
    })
</script>
    

</body>

</html>
